<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Carta Selezionata</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="single-card">
  <header>
    <button id="back-btn">← Indietro</button>
    <button id="exit-btn">Esci</button>
    <div class="toggle-container">
      <button id="theme-toggle">🌙</button>
    </div>
  </header>

  <main class="centered">
    <p id="card-number" class="card-label"></p>
    <img id="fullcard" class="fullscreen-img" alt="Carta">
  </main>

  <script src="theme.js" defer></script>
  <script>
    // Navigazione
    document.getElementById('back-btn').addEventListener('click', () => history.back());
    document.getElementById('exit-btn').addEventListener('click', () => location.href = 'index.html');

    // Parametri URL
    const params = new URLSearchParams(location.search);
    const idx = parseInt(params.get('card'), 10);
    let ext = params.get('ext');

    const img = document.getElementById('fullcard');
    const label = document.getElementById('card-number');

    if (Number.isInteger(idx) && idx > 0) {
      fetch(`cards/carta${idx}HD${ext}`)
        .then(response => {
          if (response.ok) {
            img.src = `cards/carta${idx}HD${ext}`;
            img.alt = `Carta ${idx} (HD)`;
          } else {
            img.src = `cards/carta${idx}${ext}`;
            img.alt = `Carta ${idx} (LD)`;
          }
          label.textContent = `Carta numero ${idx}`;
        })
        .catch(error => {
          img.alt = "Carta non trovata!";
          label.textContent = `Carta numero ${idx}`;
        });
    } else {
      img.alt = "Carta non specificata";
      label.textContent = "Carta non specificata";
    }
  </script>
</body>
</html>
